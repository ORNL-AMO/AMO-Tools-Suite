if: tag IS blank

language: node_js
node_js:
- 12.8.0

compiler:
- gcc

matrix:
  include:
  - name: Linux Build
    os: linux
  - name: Mac Build
    os: osx
  - name: Windows Build
    os: windows
    
before_install:
- export PRODUCTION="issue-480"
- if [[ $TRAVIS_OS_NAME == "linux" ]]; then
    sudo apt-get update;
    sudo apt-get install -y make;
    sudo apt-get install -y doxygen;
  fi
- if [[ $TRAVIS_OS_NAME == "windows" ]]; then
    choco install make --yes;
    choco install doxygen.install --yes;
  fi
- if [[ $TRAVIS_OS_NAME == "osx" ]]; then
    bew update;
    brew install make;
    brew install doxygen;
  fi
- node --version
install:
- travis_retry npm install
script:
- if [[ $TRAVIS_BRANCH == $PRODUCTION ]]; then
    export PACKAGE="ON";
  else
    export PACKAGE="OFF";
  fi
#- ls -a
- cmake -D BUILD_TESTING:BOOL=ON -D BUILD_PACKAGE:BOOL=$PACKAGE ./
- cmake --build . --config Release
#- ls -a
- if [[ $TRAVIS_OS_NAME == "windows" ]]; then
    ./Release/amo_tools_suite_tests;
  else
    ./bin/amo_tools_suite_tests;
  fi
- npm run test
- npm run at
- if [[ $TRAVIS_OS_NAME == "windows" ]]; then
    echo "Skipping Doxygen";
  else
    doxygen Doxyfile.in;
  fi
#- echo "$TRAVIS_OS_NAME"
#- bash travis_scripts/package_release.sh
- if [[$TRAVIS_BRANCH == $PRODUCTION] AND [$TRAVIS_OS_NAME == "windows"]]; then
    cmake --build . --config Release --target PACKAGE;
    ls -a;
    ls -a Release/;
  fi
- if [[$TRAVIS_BRANCH == $PRODUCTION] AND [$TRAVIS_OS_NAME != "windows"]]; then
    make package;
    ls -a;
  fi

deploy:
  provider: releases
  api_key:
    secure: ae/L9wH/mRCWvMQVwoY1qiTT510I/mcbS+OPwBMRtRvP1Svg3klkd7eDxnurIh6bdTgqNdc/Bu1AHXS0xK9pJ27hsJdFsnFaLGZ5kzj4dcH47G9pigEbPKUBHkQzZxn/KikYBvY2M8K+AA39w1In1+V8BE2YPZQYEHwL2g9i0wwqI6xgWl5eUgP1r3Z9+0SNYcWhUsYyx3sYGLwa3E6Sr+/JEHre+qLzHqrdB0PZygxKmjRTeksr3i/tYlAIYaDVXL/xbfewxSuSDYgnz6js5HqdUlpmSDH+aEgPcUopuQOH8utYMBfjKZYpbH3XqcFyPTCQHiJ28FRAi3PnvCZSqdyIkuX6e32GFULbAjJCYpY+pB7Tp89W+/rzOMzZ/H63fDtekfTH+6Q5aDc3WJx1ENh+U7WYHFKu4/qVwDwNfenmUpHR/CGJ/29Waw5+lNVb8RaGl9kiztBOsNAmcsK+qxHPwzIwM/lzlg0fksjoQJ+reNkPJwSpJg6Sn3VvsSKmRGb49qqToYzMsTW4pKhjtyDzaP0g+GxMl/a71KqP9lAxGf9/Auwh1zlp2TsZDOFxLLDFuT24GGto+btdF1TjvzIuym/qwkHac+EPCVm0qGG4+TwSJih7yBd5FL0RNR0VwJW3UQY2PDhv//IvpVF/Pmz8lJJ6AgsUumtYU5bnw+U=
  file:
    - "amo_tools_suite--Linux-x86_64.sh"
    - "amo_tools_suite--Linux-x86_64.tar.gz"
    - "amo_tools_suite--Darwin-x86_64.sh"
    - "amo_tools_suite--Darwin-x86_64.tar.gz"
    - "amo_tools_suite--Windows-i386.exe"
  overwrite: true
  skip_cleanup: true
  draft: true
  name: "RELEASE DRAFT"
  #tag_name: "release_draft"
  on:
    repo: ORNL-AMO/AMO-Tools-Suite
    branch: master
    #condition: type = push AND branch = master
    #tags: false
