language: cpp

os:
  - linux
  - osx

compiler:
  - gcc
#  - clang

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
      brew update;
      brew install doxygen;
#      brew upgrade node;
#      brew install node@10.11;
#      npm install;
      
    else
      sudo apt-get update;
      sudo apt-get install doxygen;
      sudo apt-get install npm@6.4.1;
#      npm i -g npm@6.4.1;
#      npm i -g node@10.11;
#      npm install;
    fi

install: travis_retry npm install

script:
  - cmake ./
  - make
  - ./bin/amo_tools_suite_tests
  - npm i -g npm@6.4.1
  - npm i -g node@10.11
  - npm install
  - npm run test
  - doxygen Doxyfile.in
