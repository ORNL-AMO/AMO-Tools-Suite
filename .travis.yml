language: cpp

os:
  - linux
  - osx
  - windows

compiler:
  - gcc
#  - clang

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
    brew update;
    brew install doxygen;
    nvm install 12.8.0;
    nvm use 12.8.0;
    elif [[ "$TRAVIS_OS_NAME" == "windows" ]]; then
    choco install nodejs.install --version 12.8.0
    choco install doxygen.install
    else
    sudo apt-get update;
    sudo apt-get install doxygen;
    curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -;
    sudo apt-get install -y nodejs;
    fi

install: travis_retry npm install

script:
  - node --version
  - cmake ./
  - make
  - ./bin/amo_tools_suite_tests
  - npm install
  - npm run test
  - npm run at
  - doxygen Doxyfile.in
